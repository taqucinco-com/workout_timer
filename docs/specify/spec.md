# ユーザーストーリー

## このアプリの対象ユーザー

- 主にボクシングやキックボクシング、筋トレを行うユーザー
- インターバルトレーニング（e.g. 1ラウンドあたり3mins, 休憩30secs, これを5セット行う）がしたい

 ### ユーザー心理

- トレーニングと休憩に集中したいので端末操作をしたくない
- トレーニングは残り何秒何セットかをすぐにわかりたい
- ジムに置いているスポーツタイマー、プログラムタイマーは7seg LEDのものがほとんどで見慣れた表示方法で見たい
- 時間設定をボタンタップではなく、ユーザーの音声入力でどのコマンドに該当するかを判断して行いたい
- トレーニング中はタイマー表示を見ている余裕がないので残り時間を読み上げてほしい
    - 残り半分
    - 残り30秒
    - 残り10秒

# 機能

- ホームボタンでインターバルトレーニングを行う
- 設定で利用規約やバージョン情報を見たり、音声出力設定を行う

## ホーム画面

主にインターバルトレーニングを行う。必要なもの以外は極力表示させない。時間を大きく表示する。

### 機能一覧

- 7seg LEDでトレーニング時間、インターバル時間、セット数をカウントダウンする
- pauseとstopができる
- orientationはlandscape
- 残り時間に応じて音声で読み上げる
- ボタンはシンプルにする
- 99:59(99mins 59secondes)が最大値
- オーバーフローで0に戻る、桁あふれによる次の桁のインクリメントを行わない(e.g. 1:59状態で"+1"しても1:00)
- カウントダウンはアプリがバックグラウンドになっても行われる

### 状態

1. アプリ起動初期は`時間設定未セット`の状態
2. 時間設定が未セットの場合はまず1ラウンドあたりのトレーニング時間をセットする `トレーニング時間設定中`
3. トレーニング時間の次はインターバル時間をセットする `インターバル時間設定中`
4. 最後にセット数をセットする `セット中設定中`
5. (4)が完了したら`トレーニング待ち`となる
6. (5)の状態から(8)`トレーニングカウントダウン`でタイマーがカウントダウンするかで(7)`時間の再設定`をするかのどちらかに遷移する
7. 時間を再設定する場合中断すると以前の設定で(4)に戻る、また時間を設定した場合は設定を上書きして同様に(4)に戻る
8. start操作により`トレーニングカウントダウン`となりタイマーのカウントダウンを開始する
9. 時間が残り0になると`インターバルカウントダウン`に進む、インターバルが0だった場合はセット数を減らして(8)に戻る
10. `トレーニングカウントダウン`/`インターバルカウントダウン`のどちらもpause, stopの操作ができる
11. pauseをすると`paused`となりカウントダウンが停止する、stopをすると`トレーニング待ち`となりトレーニングを中断する
12. `paused`状態からresumeするとカウントダウンが再開する
13. セット数が0になると`トレーニング待ち`に戻る

### UI

- カウントダウンする数字は全て7seg LED表示する
- 時間設定未セット状態では"0:00 & 0 sets"
    - `Start`操作を行うボタンはdisabledになる
    - 時間設定中に以降するための`Set`ボタンがある
    - 設定はトレーニング時間/インターバル時間/セットがそれぞれある0:00/0:00/0setから始まる
- トレーニング時間設定中
    - 時間の数字が点滅する
    - 時間は`+5m`, `+3m`, `+1m`, `+30s`, `+10s`, `+1s`のボタンで操作する
    - ナビゲーションのActionが`Cancel`となり、時間設定未セットもしくはトレーニング待ちに戻る
    - 画面に一部どこかにトレーニング時間設定を表す"人が走っているアイコン"`running`が点滅する
    - その右にインターバル時間設定を表す"人が疲れて休んでいるアイコン"がdisabled表示される
    - `Next`で次に進む
- インターバル時間設定中
    - 時間の数字が点滅する
    - 時間は`+5m`, `+3m`, `+1m`, `+30s`, `+10s`, `+1s`のボタンで操作する
    - 同様にナビゲーションのActionが`Cancel`となり、時間設定未セットもしくはトレーニング待ちに戻る
    - "人が疲れて休んでいるアイコン"`rest`が点滅する
    - "人が走っているアイコン"をタップするとトレーニング時間設定に戻る
    - `Next`で次に進む
- セット数設定中
    - 2つのアイコンの右にセット数を示す数字が点滅表示
    - `+1set`, `+2set`, `+3set`, `+4set`, `+5set`のボタンが表示される
    - セット数の上限は99
    - `OK`ボタンでトレーニング待ちとなり、アプリ起動中は上書きされない限りこの設定を保つ
- トレーニング待ちならば`Start`はenabledとなる
- トレーニングカウントダウン
    - トレーニング時間がカウントダウンする
    - runningとセット中が表示される
    - セット数の表示は"DONE / TOTAL" e.g. 1/3
    - `Pause`と`Stop`のボタンが表示される
- トレーニングカウントダウン
    - インターバル時間がカウントダウンする
    - restとセット中が表示される
    - `Pause`と`Stop`のボタンが表示される
    - インターバルが終わってからDONEセット数をインクリメント

### コマンド

ユーザーのUIの操作は以下に大別される。

- "training-duration-set": トレーニング時間の設定
- "interval-duration-set": インターバル時間の設定
- "round-set": セット（ラウンド）の設定
- "training-set": トレーニング時間設定
    このコマンドは上の3つのコマンドを引数とする
- "training-start": トレーニング待ちならばトレーニングカウントダウンに移行する
- "pause": "**カウントダウン"ならばpuasedに移行する
- "stop": "**カウントダウン"ならばトレーニング待ちに移行する

### 音声読み上げ

iOSやAndroidの標準Text-to-Speech(以下、TTS)を利用する。

#### 残り時間読み上げ

- 残り半分(30sec超過の時間を設定した場合)
- 残り30秒
- 残り10秒

### 音声入力

ユーザーの音声入力をSpeech-to-Text(以下、STT)で文字起こし、その内容をAIによりどのコマンドか判定する。

のそれぞれの時間になったら残り時間を読み上げる。なお設定時間がそれにそれ以下ならばその時間が読み上げない。　　
e.g. 0:30に設定した時は「残り半分」「残り30秒」を読み上げない
またインターバルは「残り10s秒」のみを読み上げる。

## 設定画面

- ホーム画面で時間未設定およびトレーニング待ちの時にナビゲーションのActionが`歯車`アイコンになり、ここから遷移する
- 一般的な設定画面と同じようにリスト表示される

### 設定項目

- 利用規約
- バージョン番号
- 音声設定
- ライセンス表示
